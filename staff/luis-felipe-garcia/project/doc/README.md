# I.- Intro.

Todos los años hay una competición deportiva de golf entre dos clubes que recrea las conocidas Ryder Cup/Solheim Cup, las más importantes entre equipos a nivel profesional masculino y femenino respectivamente.

Cada club conforma dos equipos, uno femenino y otro masculino, que se enfrentan separadamente a sus homólogos en sendos eventos a lo largo de un fin de semana. El sábado se juegan 6 partidas por parejas, en la modalidad match play doble mejor bola. El domingo, 12 individuales. Se juega en el campo de alguno de los clubes, alternándose anualmente.

En cada partida se compite por un punto, que se lo anota en su totalidad el equipo que gane, o se reparte 0,5 cada uno en caso de empate. Siendo 18 el total que se juega, gana el equipo que alcance al menos 9,5 puntos.

La pertenencia a un equipo se obtiene siguiendo el mismo procedimiento de la competición profesional. Hay una serie de competiciones de club que juegan los socios a lo largo del año, estableciéndose un ranking en función de los resultados. Los 8 primeros pasan a formar parte del equipo por esta vía. Los otros 4 los elige el capitán.

Entre las responsabilidades de éste en los días de competición, destacan el decidir las parejas que juegan el sábado y establecer el orden de salida de cada uno de los días.

Estos dos elementos forman parte de la estrategia de juego, ya que no se conocen las del equipo contrario hasta el momento en que se hacen públicas a la vez: las del sábado en el cocktail de apertura que hay el día anterior, y, las del domingo, a última hora de la tarde del sábado, tras la finalización de los encuentros de la jornada.

Definir parejas equilibradas o reforzadas con jugadores que estén en forma, gestionar la compenetración entre los integrantes, que jueguen al principio o al final del día, que los enfrentamientos estén equilibrados en su nivel, etc… son temas relevantes.

De acuerdo a las reglas de golf, un hoyo lo gana el jugador/equipo que menos golpes necesite para embocar la bola. No obstante, no es necesario ni dar todos los golpes hasta que ello suceda, ni terminar el hoyo. Por ejemplo, es habitual que si la bola del contrario está a una distancia muy corta del hoyo, se conceda el golpe, asumiendo que lo embocaría. Forma parte de las normas de etiqueta.

De igual manera, un jugador/equipo puede conceder el hoyo al contrario si considera que no tiene posibilidades de empatar el mismo (y mucho menos ganarlo). Levantaría su bola y el hoyo se daría por ganado al equipo contrario.

Tampoco es necesario jugar todos los 18 hoyos cuando un equipo lleva una ventaja de puntos superior a los que quedan por jugar. Si es matemáticamente imposible que el otro al menos empate el match, se termina el mismo en el momento que sucede. Por ejemplo, si tras finalizar el hoyo 16 un equipo lleva 3 puntos de ventaja, aún cuando el otro ganara los dos que quedan hasta los 18, el primero sería vencedor. El partido terminaría en el 16 con un resultado de 3 a 2; el equipo que estuviera ganando concedería los dos hoyos finales y se anotaría el punto en juego. Por tanto, un hoyo, al igual que un partido, puede terminar con un número de golpes por cada equipo o puede ser concedido por el equipo contrario.

La dinámica de todo este proceso es manual, con una tarjeta de puntuación del campo como soporte en el mejor de los casos. La responsabilidad de llevar la cuenta de los golpes de cada hoyo y del resultado es de los integrantes del equipo en cada partida. Existen algunas aplicaciones que permiten llevar el scoring (por ejemplo la oficial de la Federación), pero no para un formato tan específico como éste. 

Los jugadores comunican los resultados sin una pauta concreta al whatsapp del equipo o cuando son requeridos para ello con la visita del capitán. Con la información de todas las partidas, cuando existe, se puede calcular el resultado en un momento dado, si bien siempre tiene un decalaje, ya que la información no llega inmediatamente. Los simpatizantes que están viendo la competición, sólo pueden saber su evolución preguntando a alguno de los anteriores.

La App objeto del proyecto pretende facilitar la ejecución de muchas de las dinámicas que se dan, así como dotar del seguimiento de la competición online como elemento de emoción a la misma.

Los roles que se dan en la competición, y la manera en la que la App pueda ayudar, son los siguientes:

* **El club**: a los efectos operativos, la principal actuación del club es la determinación de las competiciones que puntúan para clasificarse en el equipo que lo representará, su organización, fijar el criterio de puntuación, y confeccionar un ranking que permita seguir a lo largo del año su evolución. Disponer de un entorno en el que estructurar e integrar estas actividades facilita su realización y, sobre todo, lo dota de un carácter de calidad que seguro es muy bien recibida por los socios.

* **Los socios** del club, en su faceta de “jugador qualifier” que aspira a formar parte del equipo y compite en las anteriores para clasificarse. La App puede ser el lugar donde obtener información del calendario y seguir sus resultados/posición en el ranking.

* **Los capitanes (y sus vicecapitanes)**, aparte de las funciones descritas, son los integradores del equipo, con una faceta de comunicación los días de competición o incluso en el periodo previo.

* **Los miembros del equipo**, con las responsabilidades ya descritas en cuanto a juego, control del resultado, comunicación del mismo, etc...

* **Los caddies**, que tienen unas funciones muy concretas de acuerdo a las reglas de golf en cuanto a ayuda al jugador que acompañan. Se contempla la realización de algunas tareas vinculadas al jugador con objeto de facilitar las dinámicas de resultados.

* **Los familiares/amigos** de los jugadores o aficionados a la competición del club, que a menudo acompañan las partidas y que sin duda tendrán interés en conocer la evolución de resultados, horarios de salida, etc… Se les dotará de alguna funcionalidad en cuanto a facilitar la comunicación de cómo van los partidos, de forma que puedan ejercer el antiguo rol de marcador en los orígenes de este deporte.

Con todo ello, el planteamiento de la App es el de una plataforma web que dé soporte a toda la dinámica descrita junto con otra de carácter más general vinculada a cuestiones multimedia e históricas de la competición. En concreto:

* Fotos/videos como recuerdo para los partícipes del evento o incluso de interés online en un momento dado.

* La conformación de un site repositorio de la historia, fotos, documentos de las ediciones anteriores. Se trata de una de las más antiguas en el mundo amateur local del golf.

Hay diferentes momentos temporales que vive el torneo, y que tienen implicaciones en las cargas funcionales que pueda tener la App, así como en su desarrollo:

* Desde el momento en que se concretan y empiezan a celebrarse las competiciones clasificatorias para el equipo, hasta que éste se define con los 8 primeros y las 4 elecciones por parte del capitán. Las necesidades de esta etapa están centradas en disponer de elementos informativos a los jugadores interesados en formar parte del equipo y el soporte a la administración y gestión de esta fase clasificatoria.

* Desde la concreción del equipo, unas semanas antes del evento, hasta su celebración. Componentes informativos de su cierre, celebración de entrenamientos y la dinámica propia de la competición como elementos core, junto con el aspecto de comunicación social para acoger el interés existente en la misma e incluso dinamizar éste.

* Desde la finalización de la competición anual hasta el inicio del primer ciclo del siguiente. Momentos de recap, componentes multimedia, desarrollo de la historia de la competición…

# II.- Functional description.

Las funcionalidades de la App serían las siguientes:

* Gestión de la fase clasificatoria, respondiendo a las necesidades de los tres grandes stakeholders implicados: club, qualifiers/jugadores y masa social.
    * Información de los torneos clasificatorios, su fecha de celebración y resultados (milestones).
    * Integración con API de la RFEG que da soporte a las competiciones oficiales y sus resultados. 
    * Elaboración automática y publicación del ranking clasificatorio.

* Gestión de equipos, con foco en las facilidades que necesita el capitán: determinación de integrantes, parejas, orden de salida, horarios, caddies, marcadores…

* Gestión de resultados, en un entorno que cubra toda la cadena de valor del mismo, desde el marcaje de una partida concreta, el scoring de los equipos en un momento dado, su proyección, el detalle a nivel jugador… El planteamiento puede ser tanto para un club como real time para ambos.
Divulgación, interna y externa. Site informativo multimedia que tanto para la masa social como para terceros suponga un repositorio documental de la competición.

Se establecen tres niveles de funcionalidades en cuanto a la operativa y la capacidad de interacción con la App, en función del rol del usuario.

* Basic: usuarios no registrados que tendrían acceso exclusivamente a la componente de divulgación general y al seguimiento de resultados globales. No tienen capacidad de modificar su contenido ni acceso a determinada información más local.

* Member: usuarios registrados, fundamentalmente socios con interés por la competición, bien en participar, bien en seguirlas. Se accedería a información de las competiciones internas. A priori por invitación o con credenciales vinculadas a la condición de socio.

* Team: usuarios con capacidad para intervenir en los procesos directos del desarrollo de la competición, en sus diferentes fases y con distintas funcionalidades vinculadas a su perfil. 
 
# III.- Use cases.

**Funcionalidades genéricas registrados:**

* Aceptación invitación.
* Modificación de datos personales.
* Modificación de email.
* Modificación contraseña.
* Eliminación cuenta.


**Funcionalidades específicas según rol.**

* **Para el club:**
    * Alta, modificación y baja campeonatos puntuables "race to...".
    * Alta normativa vinculada a la competición.
    * Integración de resultados de competiciones puntuables.
    * Alta, modificación y baja noticias.
    * Alta modificación y baja elementos multimedia.
    * Administración del histórico documental de la competición.
    * Alta capitanes de los equipos.
    * Invitación visitante.

* **Para capitanes:**
    * Modificación perfil personal.
    * Alta, baja y modificación jugadores equipo.
    * Alta, baja y modificación  parejas sábado.
    * Alta, baja y modificación orden partidas día.
    * Alta caddies y marcadores partidas.
    * Solicitar actualización de datos partidas.
    * Envío, modificación y borrados mensajes chat equipo.
    * Invitación visitante.

* **Para jugadores miembros del equipo:**
    * Modificación perfil personal.
    * Envío, modificación y borrados mensajes chat equipo.
    * Actualización resultados.
    * Alta, modificación y baja caddies y marcadores partida.
    * Invitación visitante.

* **Para caddies y marcadores:**
    * Actualización resultados.

	Todos los usuarios registrados podrán invitar a otra persona a unirse al evento.

Capas informativas según rol:

* **General.**
    * Site divulgativo.
    * Scoring competición.
    * Consulta emparejamientos día
    * Consulta horarios día
    * Seguimiento resultados día
    * Seguimiento resultados competición
    * Seguimiento partidas día
    * Visualización media ediciones anteriores

* **Socios y qualifiers.**
    * Información vinculada a la fase clasificatoria. 
    * Perfiles jugadores.

# IV.- Fases del proyecto.

## 1.- MPV.

El elemento core del proyecto es incorporar al desarrollo de la competición las capacidades de seguimiento online que permiten asemejar más la experiencia de usuario (en sus diferentes roles), a lo que sucede en el ámbito profesional. 

Como tal, deben formar parte de una primera entrega, MPV, las siguientes funcionalidades:

* La operativa de registros de usuarios.
* La gestión de equipos.
* La fijación de parejas por parte del capitán.
* El establecimiento del orden de salida.
* La puntuación online.
* El seguimiento real time de resultados a nivel equipo.

## 2.- Fase II: desarrollo utilidades equipo.

Se incorporaría toda la logística vinculada al proceso de clasificación para el año siguiente, el chat interno a nivel equipo y el resto de procesos de ámbito interno a uno de los equipos que compiten.


## 3.- Fase III: extensión externa.

Adición de la componente divulgativa y multimedia, de carácter abierto. Extensión de las funcionalidades de competición al otro equipo, así como de las posibilidades de interrelación en diferentes procesos: apertura de la composición de las partidas y orden de juego de forma simultánea, scoring unificado…

# V.- Technical Description.

## 1.- Data Model.

<image src="./dataModel.png" alt="Diagrama gráfico bases de datos del proyecto">

# Anexo: dbdiagram keys.

**Table users** {
  id ObjectId [primary key]
  roleId ObjectId [not null]
  clubMemberId ObjectId
  userName varchar [not null]
  userSurname_1 varchar [not null]
  userSurname_2 varchar 
  email varchar [not null, unique]
  password va [not null]
  
}

**Table invitations** {
  id ObjectId [primary key]
  sentBy ObjectId [not null]
  codeToReward varchar [not null]
  emailToSend varchar [not null] 
}

**Table roles** {
  id ObjectId [primary key]
  roleName varchar [not null]
  functName_1 boolean
  functname_N boolean
}

**Table clubs** {
  id ObjectId [primary key]
  clubName varchar [not null, unique]
}

**Table courses** {
  id ObjectId [unique, primary key, not null] 
  clubId Object [note: 'club Id to which the course belongs']
  courseName varchar [not null, note: 'one course per tee distance']
  holePar keyValue [not null, note: '3-4-5']
  holeDist keyValue [not null, note: '18 holes']
  handicap keyValue [not null, note: '18 holes']
}


**Table teams** {
  id ObjectId [primary key]
  clubId ObjectId
  ladiesGents varchar [not null, note: 'M-L']
  teamMembers keyValue [not null, note: 'players Id']
  saturdayPairs Object [note: 'Array of two playersId in order of play']
  sundayPlayers Object [note: 'Array of 12 playersId in order of play']
}

**Table competition** {
  id ObjectId [primary key]
  courseId ObjectId [not null]
  teamsToPlay Object [not null, note: 'Ids of teams']
  score Object [note: 'Array with score of matches of competition']
}


**Table match** {
  id ObjectId [primary key]
  competitionId ObjectId [not null]
  matchDate Date [not null]
  courseId ObjectId [not null]
  playersOfTeam_1 keyValue [not null, note: 'playerId_1, playerId_2']
  playersOfTeam_2 keyValue [not null, note: 'playerId_1, playerId_2']
  scoreTeam_1 keyValue [note: '18 holes']
  scoreTeam_2 keyValue [note: '18 holes']
  matchScore keyValue [note: 'Score of the match']
  
}

Ref: roles.id <> users.roleId 
Ref: clubs.id <> users.clubMemberId
Ref: clubs.id <> teams.clubId
Ref: clubs.id <> courses.clubId
Ref: competition.courseId <> courses.id
Ref: competition.id < match.competitionId
Ref: competition.teamsToPlay <> teams.id
Ref: match.playersOfTeam_1 <> teams.saturdayPairs
Ref: match.playersOfTeam_1 <> teams.sundayPlayers
Ref: match.playersOfTeam_2 <> teams.saturdayPairs
Ref: match.playersOfTeam_2 <> teams.sundayPlayers
Ref: match.courseId <> courses.id
Ref: teams.teamMembers <> users.id
Ref: users.id <> invitations.sentBy
